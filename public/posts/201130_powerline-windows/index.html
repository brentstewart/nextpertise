<!doctype html>
  <html lang="en">
  <head itemscope itemtype="https://nextpertise.net/">
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-173443199-1');
      </script>
    <title>Nextpertise Powerline Windows - a personal journal of interesting ideas</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://Nextpertise.net/style.css">
    <link rel="icon" href="/n.ico">
    <meta http-equiv="content-type" content="text/html; charset=windows-1252">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-173443199-1"></script>
    


  </head>
  <body>
    <link rel="stylesheet" href="https://nextpertise.net/bootstrap-table.css">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Nextpertise is a journal of interesting ideas: I work in Windows from time to time. Writing the article on the Tilix Powerline setup made me realize that I wanted a similar spiffy prompt in Windows.">
    <meta name="keywords" content="Windows, SSH, Git, How To,Powershell" />
    <meta name="twitter:card" content="">
    <meta property="og:title" content="Powerline Windows" >
    <meta property="og:url" content="https://nextpertise.net/posts/201130_powerline-windows/" >
    <meta property="og:description" content="" >
    <meta property="og:image" content="https://nextpertise.net/non-technical.png" >
    <link rel="apple-touch-icon" href="https://nextpertise.net/non-technical.png" >
    <link rel="stylesheet" href="https://nextpertise.net/style.css" >
</head>
<div class="tags"><img src="https://nextpertise.net/nextpertise_rays.png" alt="Nextpertise" height="75" > <i>a journal of interesting technical ideas . . .</i></div>
<div class="nav"style="text-align: left">
  <nav class="sidebar-nav">
    
    
      <a class="sidebar-nav-item" href="/" title="">Home
    
      <a class="sidebar-nav-item" href="/tags/" title="">TagCloud
    
      <a class="sidebar-nav-item" href="/posts/" title="">Archives
    
      <a class="sidebar-nav-item" href="https://stewart.tc/" title="">Personal
    
      <a class="sidebar-nav-item" href="https://stewart.tc/reading/" title="">Reading
    
      <a class="sidebar-nav-item" href="https://github.com/brentstewart" title="">Github
    
      <a class="sidebar-nav-item" href="/links" title="">Links
    
      <a class="sidebar-nav-item" href="/contributors" title="">About
    
    &NonBreakingSpace;Find us on:&NonBreakingSpace;
    <a href="https://nextpertise.net/index.xml"><img src="/Feed-icon.png" alt="RSS" height="25" >
    <a href="https://www.linkedin.com/company/nextpertise"><img src="/linkedin.png" alt="LinkedIn" height="25" >
    
  </div>

    
<img src="/shell.png#floatright" height="140">
<h1>Powerline Windows</h1> 
  <h6><div style="text-align: right"><i>by Brent Stewart  on Monday, Nov 30, 2020</i><br></div></h6>
  <p><p><img src="https://docs.microsoft.com/en-us/windows/terminal/images/powerline-powershell.png#floatright" alt="Powerline on Windows">
I work in Windows from time to time.  Writing the article on the <a href="/posts/201125_tilix/">Tilix Powerline setup made me realize that I wanted a similar spiffy prompt in Windows.  Let&rsquo;s step through how to set that up!</p>
<h2 id="step-0-we-_are_-programmers---windows-terminal">Step 0 (We <em>are</em> programmers) - Windows Terminal</h2>
<p>The <a href="https://www.microsoft.com/en-us/p/windows-terminal-preview/9n0dx20hk701?WT.mc_id=-blog-scottha">Windows Terminal is a nice addition to Windows, but doesn&rsquo;t ship with Windows 10.  It is a terminal in the Linux-sense, and support tabs and customizations.  Alas, it doesn&rsquo;t do tiling, but it supports Command Line, Powershell, WSL, SSH, and Azure Cloud.  The simplest way to get it is from the Windows Store, but you can also use the link above.</p>
<h2 id="step-1---install-a-font-that-supports-ligatures">Step 1 - Install a Font that Supports Ligatures</h2>
<p>I prefer <a href="https://www.jetbrains.com/lp/mono/">JetBrains Mono, but this is definitely a question of art.  Microsoft&rsquo;s <a href="https://github.com/microsoft/cascadia-code/releases">Cascadia is one option.  Other options, like the excellent Inconsolata can be found at sites like <a href="https://www.nerdfonts.com/">Nerd Fonts or <a href="https://www.programmingfonts.org/">Programming Fonts.</p>
<h2 id="step-2---install-git">Step 2 - Install Git</h2>
<p>Because Powerline support Git, I recommend going ahead and getting it installed so you can see it work.  You can download and install it from <img src="https://git-scm.com/downloads" alt="here">.</p>
<h2 id="step-3---setup-in-powershell">Step 3 - Setup in Powershell</h2>
<p>Open a Powershell session and install the posh-git and <a href="https://github.com/JanDeDobbeleer/oh-my-posh">oh-my-posh add-ins.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>Install-Module posh-git -Scope CurrentUser  
</span></span><span style="display:flex;"><span>Install-Module oh-my-posh -Scope CurrentUser  
</span></span></code></pre></div><p>Enable these modules to start with each new session via the terminal profile.  To open the profile, type <strong>notepad $profile</strong>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e">#add these lines  </span>
</span></span><span style="display:flex;"><span>Import-Module posh-git  
</span></span><span style="display:flex;"><span>Import-Module oh-my-posh  
</span></span><span style="display:flex;"><span>Set-Theme agnoster  
</span></span></code></pre></div><p>Note that many <a href="https://github.com/JanDeDobbeleer/oh-my-posh#themes">themes are pre-built for oh-my-posh.  Refer to the github site to see samples.  Agnoster is my personal favorite because it&rsquo;s less busy and keeps the prompt on one line.</p>
<p><img src="/WinTerminal.png#floatright" alt="Settings">
Next, you&rsquo;ll need to update the terminal settings to use the font.  In Windows Termianl, go to <em>Menu &gt; settings</em> (this will open VSCode if you have it installed).  Search for the <em>profiles</em> section and add the <em>fontFace</em> directive as shown below.  Note that we&rsquo;re setting up Powerline to work with Powershell, not in the other environments, but I also went into the Command Prompt, Ubuntu, and Azure sections and changed them to use my new font.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;profiles&#34;</span><span style="color:#960050;background-color:#1e0010">:</span>  
</span></span><span style="display:flex;"><span>    {  
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;defaults&#34;</span><span style="color:#960050;background-color:#1e0010">:</span>  
</span></span><span style="display:flex;"><span>      {  
</span></span><span style="display:flex;"><span>       // Put settings here that you want to apply to all profiles.  
</span></span><span style="display:flex;"><span>      },  
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;list&#34;</span><span style="color:#960050;background-color:#1e0010">:</span>  
</span></span><span style="display:flex;"><span>        [  
</span></span><span style="display:flex;"><span>          {  
</span></span><span style="display:flex;"><span>            // Make changes here to the powershell.exe profile.  
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;guid&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;{61c54bbd-c2c6-5271-96e7-009a87ff44bf}&#34;</span>,  
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;name&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;Windows PowerShell&#34;</span>,  
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;commandline&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;powershell.exe&#34;</span>,  
</span></span><span style="display:flex;"><span>            __<span style="color:#e6db74">&#34;fontFace&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;JetBrains Mono&#34;</span>,__  
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;hidden&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> false  
</span></span><span style="display:flex;"><span>            },  
</span></span></code></pre></div><p>##Step 4 - Setup in WSL
For WSL, we&rsquo;ll add a Go version of powerline.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>sudo apt install golang-go  
</span></span><span style="display:flex;"><span>go get -u github.com/justjanne/powerline-go  
</span></span></code></pre></div><p>and then edit the terminal settings to make sure it&rsquo;s used to display new lines.  Edit via <strong>nano ~/.bashrc</strong> and add the following snippet to the end.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>GOPATH<span style="color:#f92672">=</span>$HOME/go  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> _update_ps1<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>  
</span></span><span style="display:flex;"><span>  PS1<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>$GOPATH/bin/powerline-go -error $?<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$TERM<span style="color:#e6db74">&#34;</span> !<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;linux&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">[</span> -f <span style="color:#e6db74">&#34;</span>$GOPATH<span style="color:#e6db74">/bin/powerline-go&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>  
</span></span><span style="display:flex;"><span>  PROMPT_COMMAND<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;_update_ps1; </span>$PROMPT_COMMAND<span style="color:#e6db74">&#34;</span>  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>  
</span></span></code></pre></div><p><em>Voila!</em>  You should have Powerline functionality and cool fonts working in the different prompts available in Windows.</p>
</p>
  <br>
  <hr>
  <h6>
    <strong>References:<br></strong> &nbsp&nbsp<a href="https://www.microsoft.com/en-us/p/windows-terminal-preview/9n0dx20hk701?WT.mc_id=-blog-scottha">https://www.microsoft.com/en-us/p/windows-terminal-preview/9n0dx20hk701?WT.mc_id=-blog-scottha<br> &nbsp&nbsp<a href="https://docs.microsoft.com/en-us/windows/terminal/tutorials/powerline-setup">https://docs.microsoft.com/en-us/windows/terminal/tutorials/powerline-setup<br> &nbsp&nbsp<a href="https://www.jetbrains.com/lp/mono/">https://www.jetbrains.com/lp/mono/<br> &nbsp&nbsp<a href="https://github.com/JanDeDobbeleer/oh-my-posh">https://github.com/JanDeDobbeleer/oh-my-posh<br> &nbsp&nbsp<a href="https://github.com/JanDeDobbeleer/oh-my-posh#themes">https://github.com/JanDeDobbeleer/oh-my-posh#themes<br> 
    
    
    <br>
    Recent articles related to these tags:
    
      
        <a href="/tags/windows/">Windows 
       
        <a href="/tags/ssh/">SSH 
       
        <a href="/tags/git/">Git 
       
        <a href="/tags/how-to/">How To 
       
    
    <ul style="list-style: none;">
      
      <li class="relatedPost">
        <a href="/posts/230405_anonymous/">Anonymous Browsing<br />
        Running TOR
      </li>
    
      <li class="relatedPost">
        <a href="/posts/230305_carbonyl/">Command Line Browser Carbonyl<br />
        
      </li>
    
      <li class="relatedPost">
        <a href="/posts/221226_fancywm/">FancyWM<br />
        
      </li>
    
      <li class="relatedPost">
        <a href="/posts/220723_5g_troubleshooting/">5G Troubleshooting<br />
        
      </li>
    
      <li class="relatedPost">
        <a href="/posts/220404_winkey/">Finding Windows Keys on Hardware<br />
        
      </li>
    
  </ul>
<br>


    
Share this article:&NonBreakingSpace;
  <script src="https://platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script>
  <script type="IN/Share" data-url="/posts/201130_powerline-windows/"></script>&NonBreakingSpace;
  <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</h6>
  <script
    async
    src="https://utteranc.es/client.js"
    repo="brentstewart/nextpertise"
    issue-term="title"
    theme="github-light"
    crossorigin="anonymous"></script>
  
    <div class="nav" style="position:fixed; color: white; background-color:lightgray; bottom:0px; text-align:center; width:100%">
     <nav class ="sidebar-nav"><a href="/">Powerline Windows</nav>
</div>
  </body>
  </html>
